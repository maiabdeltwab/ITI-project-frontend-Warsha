<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Work Shops</title>
  <link rel="stylesheet" href="assets/css/bootstrap.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script type="text/javascript" src="Data.json"></script>
</head>

<body>
  <div class="workShops">
      <form action="#">
       <div class="row">
          <div class="col-sm-6">
            
              <div class="box dropdown">
                <select id="select-box1" required onchange="filterCity()">
                  <option value="all" disabled selected>Select Your city</option>
                  <option value="fayoum">Fayoum</option>
                  <option value="minya">Minia</option>
                  <option value="giza">Giza</option>
                  <option value="cairo">Cairo</option>
                </select>
              </div>
            
          </div>
         
          <div class="col-sm-6">
            
              <div class="box dropdown">
                <select id="select-box2" required onchange="filterLoction()">
                  <option value="all" disabled selected>Select Your Location</option>
                  <option value="itsa">Itsa</option>
                  <option value="fayoum">Fayoum</option>
                  <option value="damares">Damares</option>
                  <option value="minya">Minya</option>
                  <option value="giza">Giza</option>
                  <option value="maadi">Maadi</option>
                  <option value="mohandesen">Mohandesen</option>
                </select>
              </div>
          </div>
       </div>
      </form>
  </div>

  <div class="container-fluid workShops" id="workShops">
    
  </div>


  <script src="assets/js/vendor/jquery-slim.min.js"></script>
  <script src="assets/js/vendor/popper.min.js"></script>
  <script src="assets/js/vendor/bootstrap.min.js"></script>
  <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-firestore.js"></script>
  <script>
    // TODO: Replace the following with your app's Firebase project configuration
    // For Firebase JavaScript SDK v7.20.0 and later, `measurementId` is an optional field



    // var firebaseConfig = {
    //   apiKey: "AIzaSyAC0G0nvAK7KbKx2qgkyGJ16jORzlzyE-Y",
    //   authDomain: "carworkshop-7ec37.firebaseapp.com",
    //   databaseURL: "https://carworkshop-7ec37-default-rtdb.firebaseio.com",
    //   projectId: "carworkshop-7ec37",
    //   storageBucket: "carworkshop-7ec37.appspot.com",
    //   messagingSenderId: "640153744311",
    //   appId: "1:640153744311:web:27c8a4e0fe189c40136e32",
    //   measurementId: "G-641RNWK139"
    // };

    // Initialize Firebase
    // firebase.initializeApp(firebaseConfig);
    // var db = firebase.firestore();
    // db.collection("users").add({
    //   first: "Ada",
    //   last: "Lovelace",
    //   born: 1815,
    //   nikename: "nemo"
    // })
    // .then((docRef) => {
    //   console.log("Document written with ID: ", docRef.id);
    // })
    // .catch((error) => {
    //   console.error("Error adding document: ", error);
    // });
    // db.collection("users").get().then((querySnapshot) => {
    //   querySnapshot.forEach((doc) => {
    //     console.log(`${doc.id} => ${JSON.stringify(doc.data())}`);
    //   });
    // });
  </script>
  <script>
    var data;
    var rate="" , j=0;

    function readTextFile(file, callback) {
      var rawFile = new XMLHttpRequest();
      rawFile.overrideMimeType("application/json");
      rawFile.open("GET", file, true);
      rawFile.onreadystatechange = function () {
        if (rawFile.readyState === 4 && rawFile.status == "200") {
          callback(rawFile.responseText);
        }
      }
      rawFile.send(null);
    }

    function loadData() {
      document.getElementById("workShops").innerHTML = "";
     
      readTextFile("Data.json", function (text) {
        var data = JSON.parse(text);
        for (var i = 0; i < data.length; i++) {

          rate="";
           j=0;

          if (i % 2 == 0) {
             var tr = document.createElement('div');
             tr.className="row";
             }

          var td = document.createElement('div');
          td.className="col-md-6 WshopTd";

              for( j =0 ; j<parseInt( data[i].rate);j++)
              rate+="<i class='fa fa-star rate'></i>"
              if(data[i].rate % 1 != 0){
              rate+="<i class='fa fa-star-half-empty rate'></i>"
              j++; }
              for( j  ; j<5;j++)
              rate+="<i class='fa fa-star-o rate'></i>"

         //td.innerHTML = " <td class='WshopTd'> <div class='card'>   <div class='logo' style='background-image:" + data[i].icon + "'>    </div>   <div class='card-text'>   <div class='portada' style='background-image:" + data[i].image + "'>   </div>  <div class='title-total'>            <div class='title'>Work Shop Rate :" + data[i].rate + " </div>  <h2>" + data[i].name + " </h2>    <div class='address'> " + data[i].address + "</div>  <div class='actions'>             <button class='wsbtn' id='" + data[i].id + "'>  <div >Show more</div> </button>     </div>     </div>  </div>     </div>   </td> ";
           td.innerHTML = "                      <div class='card '>  <div class='logo' style='background-image:" + data[i].icon + "'>    </div>   <div class='card-text'>   <div class='portada' style='background-image:" + data[i].image + "'>   </div>  <div class='title-total'>            <div class='title'>"+rate+"                             </div>  <h2>" + data[i].name + " </h2>    <div class='address'> " + data[i].address +"</div>   <div class='actions mt-auto btn'> <button class='wsbtn' id=' " + data[i].id + "'> <div>Show more</div>  </button>     </div>     </div>  </div>     </div>";

          tr.appendChild(td);
          if (i % 2 == 1) {
            document.getElementById("workShops").appendChild(tr);
          }
        }



      });
    }

    loadData();

    function filterCity() {
      rate="";
      j=0;
      var cnt = 0;
      document.getElementById("workShops").innerHTML = "";
      city = document.getElementById("select-box1").value;
      readTextFile("Data.json", function (text) {
        var data = JSON.parse(text);
        for (var i = 0; i < data.length; i++) {
          rate="";
           j=0;

          if (data[i].city == city) {

            if (cnt % 2 == 0) { 
               var tr = document.createElement('div');
             tr.className="row";}

             var td = document.createElement('div');
             td.className="col-md-6 WshopTd";

             for( j =0 ; j<parseInt( data[i].rate);j++)
              rate+="<i class='fa fa-star rate'></i>"
              if(data[i].rate % 1 != 0){
              rate+="<i class='fa fa-star-half-empty rate'></i>"
              j++; }
              for( j  ; j<5;j++)
              rate+="<i class='fa fa-star-o rate'></i>"

            td.innerHTML = "  <div class='card'>   <div class='logo' style='background-image:" + data[i].icon + "'>    </div>   <div class='card-text'>   <div  class='portada' style='background-image:" + data[i].image + "'>   </div>  <div class='title-total'>  <div class='title'>" +rate + " </div>  <h2>" + data[i].name + " </h2>    <div class='address'> " + data[i].address + "</div>  <div class='actions mt-auto btn'>    <button class='wsbtn' id='" + data[i].id + " .btn'><div  >Show more</div></button>     </div>     </div>  </div>     </div>    ";

            tr.appendChild(td);
            if (cnt % 2 == 1) {
              document.getElementById("workShops").appendChild(tr);
            }
          }
          cnt++;
        }

      });

    }



    function filterLoction() {
      rate="";
      j=0;
      var cnt = 0;
      document.getElementById("workShops").innerHTML = "";
      loc = document.getElementById("select-box2").value;
      readTextFile("Data.json", function (text) {
        var data = JSON.parse(text);

        var tr = document.createElement('div');
          tr.className="row";

        for (var i = 0; i < data.length; i++) {
          rate="";
           j=0;

          if (data[i].location == loc) {

            var td = document.createElement('div');
            td.className="col-md-6 WshopTd";

            for( j =0 ; j<parseInt( data[i].rate);j++)
              rate+="<i class='fa fa-star rate'></i>"
              if(data[i].rate % 1 != 0){
              rate+="<i class='fa fa-star-half-empty rate'></i>"
              j++; }
              for( j  ; j<5;j++)
              rate+="<i class='fa fa-star-o rate'></i>"

            td.innerHTML = "  <div class='card'>   <div class='logo' style='background-image:" + data[i].icon + "'>    </div>   <div class='card-text'>   <div  class='portada' style='background-image:" + data[i].image + "'>   </div>  <div class='title-total'>  <div class='title'>" + rate + " </div>  <h2>" + data[i].name + " </h2>    <div class='address'> " + data[i].address + "</div>  <div class='actions mt-auto btn'>    <button class='wsbtn' id='" + data[i].id + "'><div  >Show more</div></button>     </div>     </div>  </div>     </div>    ";
            td.innerHTML = "  <div class='card'>   <div class='logo' style='background-image:" + data[i].icon + "'>    </div>   <div class='card-text'>   <div  class='portada' style='background-image:" + data[i].image + "'>   </div>  <div class='title-total'>  <div class='title'>" + rate + " </div>  <h2>" + data[i].name + " </h2>    <div class='address'> " + data[i].address + "</div>  <div class='actions mt-auto btn'>    <button class='wsbtn' id='" + data[i].id + "'><div  >Show more</div></button>     </div>     </div>  </div>     </div>    ";

            tr.appendChild(td);

            document.getElementById("workShops").appendChild(tr);
          }

          cnt++;
        }

      });
    }
  </script>
</body>

</html>